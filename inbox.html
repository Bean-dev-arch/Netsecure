<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Boîte de réception</title>
</head>
<body>

<h1>Boîte de réception</h1>

<!-- Liste des messages reçus -->
<ul id="message-list"></ul>

<script>
    // Fonction pour obtenir le paramètre "user" de l'URL
    function getQueryParam(param) {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get(param);
    }

    // Récupère l'utilisateur depuis l'URL
    const currentUser = getQueryParam('user');
    
    // Vérifie si l'utilisateur est bien identifié
    if (!currentUser) {
        document.body.innerHTML = "<h1>Erreur : Utilisateur non trouvé</h1>";
        return;
    }

    // Récupère les messages de la boîte de réception de l'utilisateur
    const messages = JSON.parse(localStorage.getItem(currentUser + '_inbox')) || [];

    // Affiche les messages reçus dans une liste
    const messageList = document.getElementById('message-list');
    if (messages.length === 0) {
        messageList.innerHTML = "<li>Aucun message dans la boîte de réception.</li>";
    } else {
        messages.forEach(message => {
            const li = document.createElement('li');
            li.textContent = `Objet: ${message.subject} - Corps: ${message.body}`;
            messageList.appendChild(li);
        });
    }
</script>

</body>
</html>

